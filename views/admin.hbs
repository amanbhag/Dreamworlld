
<hr color="black">
<div class="d-flex justify-content-center">
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="pills-add-tab" data-toggle="pill" href="#addProduct" role="tab"
                aria-controls="pills-home" aria-selected="true">Add New Product</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-update-tab" data-toggle="pill" href="#updateProduct" role="tab"
                aria-controls="pills-profile" aria-selected="false">Update Product</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-delete-tab" data-toggle="pill" href="#deleteProduct" role="tab"
                aria-controls="pills-contact" aria-selected="false">Delete Product</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-order-tab" data-toggle="pill" href="#allorders" role="tab"
                aria-controls="pills-contact" aria-selected="false">All Orders</a>
        </li>
    </ul>
</div>
<div class="tab-content" id="pills-tabContent">
    {{!-- ADD PRODUCT CODE --}}
    <div class="tab-pane fade show active" id="addProduct" role="tabpanel" aria-labelledby="pills-add-tab">
        <h1 class="display-3">Add Product</h1>
        <br>
        <form action="/add" method="post">
            <div class="form-group row">
                <label for="imagePath" class="col-sm-2 col-form-label">Upload Product Image</label>
                <div class="col-sm-10">
                    <input type='file' name="imagePath" id="imagePath" required>
                    <p id="uploadLabel"></p>
                    <input type="hidden" id="productImageUrl" name="productImageUrl" />
                    <img src="" id="imgTag" alt=" ">
                </div>
            </div>
            <div class="form-group row">
                <label for="name" class="col-sm-2 col-form-label">Product Title</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="name" id="name" placeholder="Product Title/Name"
                        required>
                </div>
            </div>
            <div class="form-group row">
                <label for="desc" class="col-sm-2 col-form-label">Product Description</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="desc" id="desc" placeholder="Product Description"
                        required>
                </div>
            </div>
            <div class="form-group row">
                <label for="price" class="col-sm-2 col-form-label">Product Price</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="price" id="price" placeholder="Product Price"
                        required>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-10">
                    <button class="btn btn-success" disabled id="add-product" type="submit">Add Product</button>
                </div>
            </div>
        </form>
    </div>

    {{!-- UPDATE PRODUCT CODE --}}
    <div class="tab-pane fade" id="updateProduct" role="tabpanel" aria-labelledby="pills-update-tab">
        <h1 class="display-3">Update Product</h1>
        <br>
        <table class="ProductTable">
            {{#if result}}
            <thead>
                <td>Product Image Path</td>
                <td>Product Name</td>
                <td>Product Description</td>
                <td>Product Price</td>
                <td>Click to Update</td>
            </thead>
            <tbody>
                {{#each allProducts}}
                <form method="post">
                    <tr>
                        <td>
                            <input type="text" name="updatedImagePath" id="updatedImagePath" value="{{this.imagePath}}">
                        </td>
                        <td>
                            <input type="text" name="updatedName" id="updatedName" value="{{this.name}}">
                        </td>
                        <td>
                            <input type="text" name="updatedDesc" id="updatedDesc" value="{{this.desc}}">
                        </td>
                        <td>
                            <input type="text" name="updatedPrice" id="updatedPrice" value="{{this.price}}">
                        </td>
                        <td>
                            <input type="hidden" name="_id" value="{{this._id}}">
                            <input type="submit" value="Click to Update" class="btn btn-success">
                        </td>
                    </tr>
                </form>
                {{/each}}
            </tbody>
            {{else}}
            <h2>No Products Found</h2>
            {{/if}}
        </table>
    </div>

    {{!-- DELETE PRODUCT CODE --}}
    <div class="tab-pane fade" id="deleteProduct" role="tabpanel" aria-labelledby="pills-delete-tab">
        <h1 class="display-3">Delete Product</h1>
        <br>
        <form action="/deleteAllProduct" method="GET" onsubmit="return validate()">
            <button class="float-right btn btn-warning" type="submit">Delete All Product</button>
        </form>

        <table class="ProductTable">
            {{#if result}}
            <thead>
                <td>Product ID</td>
                <td>Product Name</td>
                <td>Product Price</td>
                <td>Click to Delete</td>
            </thead>
            {{else}}
            <h2>No Products Found</h2>
            {{/if}}
            <tbody>
                {{#each allProducts}}
                <tr>
                    <td>{{this._id}}</td>
                    <td>{{this.name}}</td>
                    <td>{{this.price}}</td>
                    <td><a href="/delete/{{this._id}}" class="btn btn-danger float-right">Delete Product</a></td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>


    {{!-- ALL ORDERS CODE --}}
    <div class="tab-pane fade" id="allorders" role="tabpanel" aria-labelledby="pills-order-tab">
        <h1 class="display-3">All Orders</h1>
        <br>
        <table class="ProductTable">
            {{#if resultOrder}}
            <thead>
                <td>Order ID</td>
                <td>Customer name</td>
                <td>Total Products</td>
                <td>Product Names & Price</td>
                <td>Total Price</td>
                <td>Current Order Status</td>
                <td>Change Status</td>
                <td>Update Order</td>
            </thead>
            <tbody>
                {{#each allOrders}}
                <form id='updateOrder' method="post" action="/updateOrder">
                    <tr>
                        <td>
                            {{this._id}}
                        </td>
                        <td>
                            {{this.userName}}
                        </td>
                        <td>
                            {{this.cart.totalQty}}
                        </td>
                        <td>
                            {{#each this.cart.items}}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <i style="font-size:12px;">{{ this.title }} | {{ this.qty }} Units</i>
                                <span class="badge badge-primary badge-pill">
                                    <i style="font-size:10px;">{{ this.price }}</i>
                                </span>
                            </li>
                            {{/each}}
                        </td>
                        <td>
                            â‚¹{{this.cart.totalPrice}}
                        </td>

                        <td>
                            {{this.status}}
                        </td>
                        <td>
                            <select class="browser-default" name="status" id="status">
                                <option value="" disabled selected>--Status--</option>
                                <option value="Received">Received</option>
                                <option value="Cancelled">Cancelled</option>
                                <option value="Dispatched">Dispatched</option>
                                <option value="Out for delivery">Out for delivery</option>
                                <option value="Delivered">Delivered</option>
                            </select>
                        </td>
                        <td>
                            <input type="hidden" name="_id" value="{{this._id}}">
                            <input type="submit" value="Update Order Status" class="btn btn-success">
                        </td>
                    </tr>
                </form>
                {{/each}}
            </tbody>
            {{else}}
            <h2>No Orders Received yet</h2>
            {{/if}}
        </table>
    </div>
</div>